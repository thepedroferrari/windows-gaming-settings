/**
 * Gaming PC Setup - CSS Architecture
 * Using @layer for cascade control and modern CSS features
 */

/* =============================================================================
   LAYER ORDER DECLARATION
   Controls cascade priority: later layers have higher specificity
   ============================================================================= */
   @layer reset, tokens, base, layout, components, animations, utilities, overrides;

   /* =============================================================================
      IMPORTS - Modular CSS files assigned to layers
      ============================================================================= */
   @import './src/styles/reset.css' layer(reset);
   @import './src/styles/tokens.css' layer(tokens);
   @import './src/styles/utilities.css' layer(utilities);

   /* Component styles */
   @import './src/components/software-card/software-card.styles.css' layer(components);

   /* =============================================================================
      CSS HOUDINI - @property declarations for animatable custom properties
      ============================================================================= */
   @property --border-angle {
     syntax: '<angle>';
     initial-value: 0deg;
     inherits: false;
   }

   @property --glow-opacity {
     syntax: '<number>';
     initial-value: 0;
     inherits: false;
   }

   @property --shimmer-mask {
     syntax: '<angle>';
     inherits: false;
     initial-value: 33deg;
   }

   /* =============================================================================
      BASE LAYER - Body styles and global effects
      ============================================================================= */
   @layer base {
     body {
       font-family: var(--font-body);
       background: var(--bg-primary);
       color: var(--text-primary);
       line-height: 1.6;
       min-height: 100vh;
       overflow-x: hidden;
       -webkit-font-smoothing: antialiased;
       position: relative;
     }

     /* Animated Aurora Background Layer */
     body::before {
       content: '';
       position: fixed;
       inset: 0;
       background:
         radial-gradient(ellipse 100% 80% at 15% -15%, color-mix(in oklch, var(--accent) 20%, transparent), transparent 50%),
         radial-gradient(ellipse 90% 70% at 85% 15%, color-mix(in oklch, oklch(0.6 0.15 250) 15%, transparent), transparent 50%),
         radial-gradient(ellipse 70% 60% at 50% 110%, color-mix(in oklch, oklch(0.65 0.2 350) 10%, transparent), transparent 45%),
         radial-gradient(ellipse 50% 40% at 30% 60%, color-mix(in oklch, var(--safe) 5%, transparent), transparent 40%);
       animation: auroraShift 25s ease-in-out infinite alternate;
       pointer-events: none;
       z-index: -1;
     }

     /* Noise texture overlay - animated grain */
     body::after {
       content: '';
       position: fixed;
       inset: 0;
       background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
       opacity: 0.025;
       pointer-events: none;
       z-index: 1;
       animation: noiseShift 0.4s steps(8) infinite;
       mix-blend-mode: overlay;
     }
   }

   /* =============================================================================
      ANIMATIONS LAYER - All @keyframes declarations
      ============================================================================= */
   @layer animations {
     @keyframes auroraShift {
       0% {
         background-position: 0% 0%, 100% 0%, 50% 100%, 30% 50%;
         filter: hue-rotate(0deg) brightness(1);
       }
       33% {
         background-position: 30% 20%, 70% 30%, 40% 90%, 60% 40%;
         filter: hue-rotate(15deg) brightness(1.05);
       }
       66% {
         background-position: 60% 10%, 40% 50%, 60% 100%, 20% 70%;
         filter: hue-rotate(-10deg) brightness(1);
       }
       100% {
         background-position: 100% 30%, 0% 70%, 50% 80%, 50% 30%;
         filter: hue-rotate(20deg) brightness(1.02);
       }
     }

     @keyframes noiseShift {
       0% { transform: translate(0, 0); }
       25% { transform: translate(-2%, -2%); }
       50% { transform: translate(2%, 1%); }
       75% { transform: translate(-1%, 2%); }
       100% { transform: translate(1%, -1%); }
     }

     @keyframes fadeInUp {
       from {
         opacity: 0;
         transform: translateY(30px);
       }
       to {
         opacity: 1;
         transform: translateY(0);
       }
     }

     @keyframes fadeIn {
       from { opacity: 0; }
       to { opacity: 1; }
     }

     @keyframes scaleIn {
       from {
         opacity: 0;
         transform: scale(0.9);
       }
       to {
         opacity: 1;
         transform: scale(1);
       }
     }

     @keyframes ripple {
       to {
         transform: scale(2.5);
         opacity: 0;
       }
     }

     @keyframes borderRotate {
       to { --border-angle: 360deg; }
     }

     @keyframes borderPulse {
       0%, 100% {
         opacity: 0.6;
         filter: blur(4px);
       }
       50% {
         opacity: 1;
         filter: blur(6px);
       }
     }

     @keyframes glowPulse {
       0%, 100% {
         box-shadow:
           inset 0 1px 2px color-mix(in oklch, oklch(1 0 0) 12%, transparent),
           inset 0 -1px 2px color-mix(in oklch, oklch(0 0 0) 15%, transparent),
           0 16px 48px color-mix(in oklch, oklch(0 0 0) 40%, transparent),
           0 0 60px color-mix(in oklch, var(--accent) 8%, transparent),
           0 0 1px color-mix(in oklch, var(--accent) 40%, transparent);
       }
       50% {
         box-shadow:
           inset 0 1px 2px color-mix(in oklch, oklch(1 0 0) 15%, transparent),
           inset 0 -1px 2px color-mix(in oklch, oklch(0 0 0) 15%, transparent),
           0 16px 48px color-mix(in oklch, oklch(0 0 0) 40%, transparent),
           0 0 80px color-mix(in oklch, var(--accent) 12%, transparent),
           0 0 2px color-mix(in oklch, var(--accent) 60%, transparent);
       }
     }

     @keyframes glassReveal {
       from {
         opacity: 0;
         transform: translateY(50px) scale(0.96);
       }
       to {
         opacity: 1;
         transform: translateY(0) scale(1);
       }
     }

     @keyframes glassBlurIn {
       from {
         backdrop-filter: blur(0px) saturate(1);
         -webkit-backdrop-filter: blur(0px) saturate(1);
       }
       to {
         backdrop-filter: blur(var(--glass-depth-2)) saturate(1.5);
         -webkit-backdrop-filter: blur(var(--glass-depth-2)) saturate(1.5);
       }
     }

     @keyframes tierGlow {
       0%, 100% { filter: brightness(1); }
       50% { filter: brightness(1.15); }
     }

     @keyframes cyberpunkPulse {
       0%, 100% { opacity: 1; }
       50% { opacity: 0.85; }
     }

     @keyframes presetGlowPulse {
       0%, 100% {
         opacity: 0.6;
         transform: scale(1.3);
       }
       50% {
         opacity: 0.9;
         transform: scale(1.6);
       }
     }

     @keyframes shimmerWipe {
       0% { mask-position: 200% center; }
       100% { mask-position: 0% center; }
     }

     @keyframes shimmerTextWipe {
       0% { background-position: center 200%; }
       40%, 100% { background-position: center 0%; }
     }

     @keyframes slideDown {
       from {
         opacity: 0;
         transform: translateX(-50%) translateY(-100%);
       }
       to {
         opacity: 1;
         transform: translateX(-50%) translateY(0);
       }
     }

     @keyframes diff-pulse {
       0% { box-shadow: inset 0 0 0 2px color-mix(in oklch, var(--accent) 60%, transparent); }
       100% { box-shadow: inset 0 0 0 1px color-mix(in oklch, var(--accent) 40%, transparent); }
     }

     @keyframes cardEnter {
       from {
         opacity: 0;
         transform: translateY(20px) scale(0.9) translateZ(-20px);
       }
       to {
         opacity: 1;
         transform: translateY(0) scale(1) translateZ(0);
       }
     }

     @keyframes chromaticPulse {
       0%, 100% {
         opacity: 0.5;
         transform: scale(1);
         filter: blur(10px);
       }
       50% {
         opacity: 0.8;
         transform: scale(1.03);
         filter: blur(12px);
       }
     }

     /* Hero Cube Animations */
     @keyframes hero-brightness {
       0% { filter: brightness(1) contrast(1); }
       100% { filter: brightness(0.85) contrast(1.2); }
     }

     @keyframes hero-silhouette-blur {
       0% { filter: blur(0px); }
       100% { filter: blur(2px); }
     }

     @keyframes hero-hue-rotate {
       0%, 100% { filter: hue-rotate(0deg); }
       50% { filter: hue-rotate(60deg); }
     }

     @keyframes hero-left {
       0% { margin-left: 450px; }
       100% { margin-left: -60000px; }
     }

     @keyframes hero-back {
       0% { margin-left: -400px; }
       100% { margin-left: -60850px; }
     }

     @keyframes hero-right {
       0% { margin-left: -1250px; }
       100% { margin-left: -61700px; }
     }
   }

   /* =============================================================================
      LAYOUT LAYER - Header, main, footer, hero structure
      ============================================================================= */
   @layer layout {
     header {
       text-align: center;
       padding: 0;
       position: relative;
       animation: fadeInUp 0.8s var(--ease-out-expo) forwards;

       &::after {
         content: '';
         position: absolute;
         bottom: 0;
         left: 50%;
         transform: translateX(-50%);
         width: 300px;
         height: 1px;
         background: linear-gradient(
           90deg,
           transparent 0%,
           color-mix(in oklch, var(--accent) 30%, transparent) 20%,
           color-mix(in oklch, oklch(1 0 0) 20%, transparent) 50%,
           color-mix(in oklch, var(--accent) 30%, transparent) 80%,
           transparent 100%
         );
       }
     }

     main {
       max-width: var(--max-width);
       margin: 0 auto;
       padding: var(--space-lg);
     }

     footer {
       text-align: center;
       padding: var(--space-2xl);
       color: var(--text-hint);
       font-size: 0.875rem;
       border-top: 1px solid var(--border);
       margin-top: var(--space-3xl);

       & a {
         color: var(--text-secondary);
         text-decoration: none;
         transition: color 0.2s;

         &:hover {
           color: var(--accent);
           text-shadow:
             0 0 8px color-mix(in oklch, var(--accent) 40%, transparent),
             0 0 16px color-mix(in oklch, var(--accent) 20%, transparent);
         }
       }
     }

     /* Hero Cube Wrapper */
     .hero-cube-wrapper {
       position: relative;
       width: calc(var(--max-width) * 1.2);
       max-width: 100vw;
       height: 340px;
       margin: 0 auto;
       display: flex;
       align-items: center;
       justify-content: center;
       overflow: hidden;
       border-radius: var(--radius-xl);
     }

     .hero-cube-content {
       position: absolute;
       inset: 0;
       display: flex;
       align-items: center;
       justify-content: center;
       overflow: hidden;
       border-radius: var(--radius-xl);
       animation: hero-brightness 200s linear infinite;
     }

     .hero-bg-image {
       position: absolute;
       width: 100%;
       height: 100%;
       object-fit: cover;
       object-position: center 60%;
       pointer-events: none;
     }

     .hero-silhouette {
       position: absolute;
       width: 100%;
       height: 100%;
       object-fit: contain;
       object-position: center bottom;
       z-index: 2;
       pointer-events: none;
       animation: hero-silhouette-blur 200s linear infinite;
     }

     .hero-hue-overlay {
       position: absolute;
       inset: 0;
       z-index: 3;
       mix-blend-mode: overlay;
       background: radial-gradient(ellipse at center, var(--accent) 0%, oklch(0.6 0.15 250) 100%);
       opacity: 0.7;
       animation: hero-hue-rotate 8s infinite ease-in-out;
       pointer-events: none;
     }

     .hero-cube-container {
       position: absolute;
       inset: 0;
       display: flex;
       align-items: center;
       justify-content: center;
       z-index: 1;
     }

     .hero-cube-wrapper .cube {
       position: relative;
       width: 900px;
       height: 140px;
       transform-style: preserve-3d;
       perspective: 500px;
       perspective-origin: 51% 70%;
     }

     .hero-cube-wrapper .face {
       position: absolute;
       width: 900px;
       height: 140px;
       display: flex;
       align-items: center;
       overflow: hidden;
       background: transparent;
       opacity: 0.6;

       & p {
         white-space: nowrap;
         overflow: hidden;
         font-family: var(--font-display);
         font-weight: 800;
         font-size: 5.5rem;
         color: color-mix(in oklch, oklch(1 0 0) 90%, transparent);
         text-transform: uppercase;
         letter-spacing: 0.02em;
         margin: 0;
         padding: 0;
         text-shadow: 0 1px 4px color-mix(in oklch, oklch(0 0 0) 55%, transparent);

         & span {
           color: oklch(0.6 0.25 320);
           text-shadow:
             0 0 2px color-mix(in oklch, oklch(0.3 0.15 280) 70%, transparent),
             0 0 4px color-mix(in oklch, oklch(0.6 0.25 320) 70%, transparent),
             0 0 8px color-mix(in oklch, oklch(0.6 0.25 320) 70%, transparent);
         }
       }
     }

     .hero-cube-wrapper .front {
       transform: translateZ(450px);
       display: none;
     }

     .hero-cube-wrapper .back {
       transform: translateZ(-450px) rotateY(180deg) scaleX(-1);
     }

     .hero-cube-wrapper .left {
       transform: translateX(-450px) rotateY(-90deg) scaleX(-1);
     }

     .hero-cube-wrapper .right {
       transform: translateX(450px) rotateY(90deg) scaleX(-1);
     }

     .hero-cube-wrapper .top,
     .hero-cube-wrapper .bottom {
       display: none;
     }

     .hero-cube-wrapper .left p {
       margin-left: 450px;
       animation: hero-left 400s linear infinite;
     }

     .hero-cube-wrapper .back p {
       margin-left: -400px;
       animation: hero-back 400s linear infinite;
     }

     .hero-cube-wrapper .right p {
       margin-left: -1250px;
       animation: hero-right 400s linear infinite;
     }

     /* Hero Overlay */
     .hero-overlay {
       position: absolute;
       inset: 0;
       z-index: 10;
       display: flex;
       flex-direction: column;
       align-items: center;
       justify-content: space-between;
       padding: var(--space-xs) var(--space-md) var(--space-sm);
       text-align: center;
       pointer-events: none;

       & h1 {
         font-family: var(--font-display);
         font-size: clamp(2.5rem, 12vw, 4rem);
         font-weight: 900;
         letter-spacing: 0.06em;
         text-transform: uppercase;
         color: #fff;
         text-shadow:
           0 0 10px oklch(0 0 0),
           0 0 20px oklch(0 0 0),
           0 0 40px color-mix(in oklch, oklch(0 0 0) 80%, transparent),
           0 2px 4px oklch(0 0 0);
       }

       & .tagline {
         font-family: var(--font-display);
         font-size: 1.4rem;
         font-weight: 700;
         letter-spacing: 0.2em;
         text-transform: uppercase;
         color: color-mix(in oklch, oklch(1 0 0) 85%, transparent);
         text-shadow:
           0 1px 2px color-mix(in oklch, oklch(0 0 0) 90%, transparent),
           0 2px 8px color-mix(in oklch, oklch(0 0 0) 60%, transparent);
       }
     }

     /* Cube Reflection */
     .hero-cube-reflect {
       position: absolute;
       top: 60%;
       left: 50%;
       transform: translateX(-50%);
       filter: blur(8px);
       opacity: 0.25;
       pointer-events: none;
       z-index: 1;

       & .cube {
         position: relative;
         width: 900px;
         height: 140px;
         transform-style: preserve-3d;
         perspective: 500px;
         perspective-origin: 51% -30%;
       }

       & .face {
         position: absolute;
         width: 900px;
         height: 140px;
         display: flex;
         align-items: center;
         overflow: hidden;
         background: transparent;
         opacity: 0.4;

         & p {
           white-space: nowrap;
           overflow: hidden;
           font-family: var(--font-display);
           font-weight: 800;
           font-size: 5.5rem;
           color: color-mix(in oklch, oklch(1 0 0) 40%, transparent);
           text-transform: uppercase;
           letter-spacing: 0.02em;
           margin: 0;
           transform: scaleY(0.7);

           & span {
             color: color-mix(in oklch, oklch(0.9 0.1 60) 50%, transparent);
           }
         }
       }

       & .back {
         transform: translateZ(-450px) rotateY(180deg) scaleX(-1) scaleY(-1);
       }

       & .left {
         transform: translateX(-450px) rotateY(-90deg) scaleX(-1) scaleY(-1);
       }

       & .right {
         transform: translateX(450px) rotateY(90deg) scaleX(-1) scaleY(-1);
       }

       & .top,
       & .bottom {
         display: none;
       }

       & .left p {
         margin-left: 450px;
         animation: hero-left 400s linear infinite;
       }

       & .back p {
         margin-left: -400px;
         animation: hero-back 400s linear infinite;
       }

       & .right p {
         margin-left: -1250px;
         animation: hero-right 400s linear infinite;
       }
     }

     /* Grid Layouts */
     .upgrades-grid {
       display: grid;
       grid-template-columns: 1fr 1fr;
       gap: var(--space-md);
       margin-bottom: var(--space-md);

       &--danger {
         margin-top: var(--space-lg);
       }
     }

     .core-grid {
       display: grid;
       grid-template-columns: repeat(2, minmax(0, 1fr));
       gap: var(--space-md);
       margin-bottom: var(--space-md);
     }

     .peripheral-columns {
       display: grid;
       grid-template-columns: repeat(2, minmax(0, 1fr));
       gap: var(--space-lg);
     }

     .peripheral-column {
       display: flex;
       flex-direction: column;
       gap: var(--space-xs);
     }

     .monitor-columns {
       display: grid;
       grid-template-columns: 1fr 1fr;
       gap: var(--space-lg);
     }

     .monitor-column {
       display: flex;
       flex-direction: column;
       gap: var(--space-xs);
     }

     .driver-grid {
       display: grid;
       grid-template-columns: repeat(2, 1fr);
       gap: var(--space-md);
     }
   }

   /* =============================================================================
      COMPONENTS LAYER - All UI components
      ============================================================================= */
   @layer components {
     /* Step Sections */
     .step {
       --stagger: 0;
       margin-bottom: var(--space-2xl);
       padding: var(--space-xl);
       position: relative;
       border-radius: var(--radius-lg);
       isolation: isolate;
       transform-style: preserve-3d;
       opacity: 1;
       transform: translateY(0);
       transition: all 0.4s var(--ease-out-expo);

       /* Base glass layer */
       &::before {
         content: '';
         position: absolute;
         inset: 0;
         background: linear-gradient(
           var(--light-angle),
           color-mix(in oklch, oklch(1 0 0) 6%, transparent) 0%,
           color-mix(in oklch, oklch(1 0 0) 2%, transparent) 40%,
           color-mix(in oklch, oklch(0 0 0) 3%, transparent) 100%
         );
         backdrop-filter: blur(var(--glass-depth-2)) saturate(1.5);
         -webkit-backdrop-filter: blur(var(--glass-depth-2)) saturate(1.5);
         border: 1px solid color-mix(in oklch, oklch(1 0 0) 8%, transparent);
         border-radius: inherit;
         box-shadow:
           inset 0 1px 1px color-mix(in oklch, oklch(1 0 0) 8%, transparent),
           inset 0 -1px 2px color-mix(in oklch, oklch(0 0 0) 15%, transparent),
           0 8px 32px color-mix(in oklch, oklch(0 0 0) 35%, transparent),
           0 2px 8px color-mix(in oklch, oklch(0 0 0) 20%, transparent);
         z-index: -2;
         transition: all 0.4s var(--ease-out-expo);
       }

       /* Inner light refraction layer */
       &::after {
         content: '';
         position: absolute;
         inset: 1px;
         background:
           radial-gradient(
             ellipse 120% 80% at 25% 15%,
             color-mix(in oklch, oklch(1 0 0) 8%, transparent),
             transparent 45%
           ),
           radial-gradient(
             ellipse 80% 60% at 85% 90%,
             color-mix(in oklch, var(--accent) 4%, transparent),
             transparent 40%
           );
         border-radius: inherit;
         pointer-events: none;
         z-index: 2;
         opacity: 0.8;
         transition: opacity 0.3s;
       }

       &:hover::before {
         border-color: color-mix(in oklch, var(--accent) 25%, transparent);
         box-shadow:
           inset 0 1px 2px color-mix(in oklch, oklch(1 0 0) 12%, transparent),
           inset 0 -1px 2px color-mix(in oklch, oklch(0 0 0) 15%, transparent),
           0 16px 48px color-mix(in oklch, oklch(0 0 0) 40%, transparent),
           0 0 60px color-mix(in oklch, var(--accent) 8%, transparent);
         animation: glowPulse 2s ease-in-out infinite;
       }

       &:hover::after {
         opacity: 1;
       }

       & h2 {
         font-family: var(--font-display);
         font-size: 1.375rem;
         font-weight: 700;
         margin-bottom: var(--space-xs);
         display: flex;
         align-items: center;
         gap: var(--space-md);
         letter-spacing: 0.04em;
         text-transform: uppercase;
       }

       &.animate-in {
         opacity: 0;
         transform: translateY(50px) scale(0.96);

         &::before {
           backdrop-filter: blur(0px);
           -webkit-backdrop-filter: blur(0px);
         }

         &.visible {
           animation: glassReveal 0.9s var(--ease-out-expo) calc(var(--stagger, 0) * 120ms) both;

           &::before {
             animation: glassBlurIn 0.9s var(--ease-out-expo) calc(var(--stagger, 0) * 120ms) both;
           }
         }
       }
     }

     .step-num {
       display: inline-flex;
       align-items: center;
       justify-content: center;
       width: 2rem;
       height: 2rem;
       background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dim) 100%);
       color: white;
       font-family: var(--font-display);
       font-size: 0.875rem;
       font-weight: 700;
       border-radius: 50%;
       box-shadow:
         0 0 25px var(--accent-glow),
         0 0 0 4px color-mix(in oklch, var(--accent) 10%, transparent);
       transition: all 0.3s var(--ease-out-expo);

       .step:hover & {
         transform: scale(1.1);
         box-shadow:
           0 0 35px var(--accent-glow-strong),
           0 0 0 6px color-mix(in oklch, var(--accent) 15%, transparent);
         text-shadow:
           0 0 6px color-mix(in oklch, oklch(1 0 0) 60%, transparent),
           0 0 12px color-mix(in oklch, var(--accent) 50%, transparent);
       }
     }

     .step-desc {
       font-family: var(--font-ui);
       color: var(--text-secondary);
       font-size: 0.95rem;
       font-weight: 500;
       margin-bottom: var(--space-lg);
       padding-left: calc(2rem + var(--space-md));
     }

     /* Fieldsets */
     fieldset {
       --control-accent: var(--accent);
       --control-glow: color-mix(in oklch, var(--accent) 50%, transparent);
       --control-glow-soft: color-mix(in oklch, var(--accent) 20%, transparent);
       --control-glow-pulse: color-mix(in oklch, var(--accent) 30%, transparent);

       border: 1px solid var(--border);
       border-radius: var(--radius);
       padding: var(--space-md) var(--space-lg);
       margin-bottom: 0;
       background: var(--bg-tertiary);
       transition: border-color 0.2s;
       overflow: visible;
       display: flex;
       flex-direction: column;
       gap: 8px;

       &:hover {
         border-color: var(--border-light);
       }

       &.tier-safe-field {
         --control-accent: var(--safe);
         --control-glow: color-mix(in oklch, var(--safe) 50%, transparent);
         --control-glow-soft: color-mix(in oklch, var(--safe) 20%, transparent);
         --control-glow-pulse: color-mix(in oklch, var(--safe) 30%, transparent);
         --glass-tint: color-mix(in oklch, var(--safe) 6%, transparent);
         --glass-edge: color-mix(in oklch, var(--safe) 35%, transparent);

         border-color: color-mix(in oklch, var(--safe) 25%, transparent);
         background:
           linear-gradient(
             var(--light-angle),
             var(--glass-tint) 0%,
             transparent 50%
           ),
           linear-gradient(135deg, var(--safe-bg) 0%, var(--bg-tertiary) 100%);
         box-shadow:
           inset 0 1px 0 color-mix(in oklch, var(--safe) 10%, transparent),
           0 4px 16px color-mix(in oklch, oklch(0 0 0) 15%, transparent);

         &:hover {
           border-color: color-mix(in oklch, var(--safe) 40%, transparent);
           box-shadow:
             inset 0 1px 0 color-mix(in oklch, var(--safe) 15%, transparent),
             0 6px 24px color-mix(in oklch, oklch(0 0 0) 20%, transparent),
             0 0 30px color-mix(in oklch, var(--safe) 8%, transparent);
         }
       }

       &.tier-caution-field {
         --control-accent: var(--caution);
         --control-glow: color-mix(in oklch, var(--caution) 50%, transparent);
         --control-glow-soft: color-mix(in oklch, var(--caution) 20%, transparent);
         --control-glow-pulse: color-mix(in oklch, var(--caution) 30%, transparent);
         --glass-tint: color-mix(in oklch, var(--caution) 6%, transparent);
         --glass-edge: color-mix(in oklch, var(--caution) 35%, transparent);

         border-color: color-mix(in oklch, var(--caution) 25%, transparent);
         background:
           linear-gradient(
             var(--light-angle),
             var(--glass-tint) 0%,
             transparent 50%
           ),
           linear-gradient(135deg, var(--caution-bg) 0%, var(--bg-tertiary) 100%);
         box-shadow:
           inset 0 1px 0 color-mix(in oklch, var(--caution) 10%, transparent),
           0 4px 16px color-mix(in oklch, oklch(0 0 0) 15%, transparent);

         &:hover {
           border-color: color-mix(in oklch, var(--caution) 40%, transparent);
           box-shadow:
             inset 0 1px 0 color-mix(in oklch, var(--caution) 15%, transparent),
             0 6px 24px color-mix(in oklch, oklch(0 0 0) 20%, transparent),
             0 0 30px color-mix(in oklch, var(--caution) 8%, transparent);
         }
       }

       &.tier-risky-field {
         --control-accent: var(--risky);
         --control-glow: color-mix(in oklch, var(--risky) 50%, transparent);
         --control-glow-soft: color-mix(in oklch, var(--risky) 20%, transparent);
         --control-glow-pulse: color-mix(in oklch, var(--risky) 30%, transparent);
         --glass-tint: color-mix(in oklch, var(--risky) 6%, transparent);
         --glass-edge: color-mix(in oklch, var(--risky) 35%, transparent);

         border-color: color-mix(in oklch, var(--risky) 25%, transparent);
         background:
           linear-gradient(
             var(--light-angle),
             var(--glass-tint) 0%,
             transparent 50%
           ),
           linear-gradient(135deg, var(--risky-bg) 0%, var(--bg-tertiary) 100%);
         box-shadow:
           inset 0 1px 0 color-mix(in oklch, var(--risky) 10%, transparent),
           0 4px 16px color-mix(in oklch, oklch(0 0 0) 15%, transparent);

         &:hover {
           border-color: color-mix(in oklch, var(--risky) 40%, transparent);
           box-shadow:
             inset 0 1px 0 color-mix(in oklch, var(--risky) 15%, transparent),
             0 6px 24px color-mix(in oklch, oklch(0 0 0) 20%, transparent),
             0 0 30px color-mix(in oklch, var(--risky) 8%, transparent);
         }
       }

       & label {
         display: grid;
         grid-template-columns: auto 1fr auto;
         grid-template-rows: auto auto;
         column-gap: 0.6rem;
         row-gap: 0;
         align-items: center;
         padding: 0.4rem 0.65rem;
         margin: 2px 0;
         border-radius: 4px;
         cursor: pointer;
         transition: all 0.2s var(--ease-out-expo);
         position: relative;
         border: 1px solid transparent;

         &:hover {
           background: linear-gradient(135deg, color-mix(in oklch, var(--control-accent) 8%, transparent), color-mix(in oklch, var(--control-accent) 4%, transparent));
           border-color: color-mix(in oklch, var(--control-accent) 20%, transparent);
         }

         &:active {
           transform: scale(0.985);
         }

         &:has(input:checked) {
           background: linear-gradient(135deg, color-mix(in oklch, var(--control-accent) 12%, transparent), color-mix(in oklch, var(--control-accent) 6%, transparent));
           border-color: color-mix(in oklch, var(--control-accent) 35%, transparent);

           & .label-text {
             color: var(--text-primary);
             text-shadow: 0 0 8px var(--control-glow-pulse);
           }
         }

         &[data-tooltip]::after {
           content: attr(data-tooltip);
           position: absolute;
           left: 0;
           top: calc(100% + 4px);
           transform: translateY(-4px);
           width: 100%;
           min-width: 280px;
           padding: var(--space-sm) var(--space-md);
           background: color-mix(in oklch, oklch(0.12 0.02 285) 98%, transparent);
           backdrop-filter: blur(12px);
           border: 1px solid color-mix(in oklch, var(--control-accent) 25%, transparent);
           border-radius: var(--radius);
           font-size: 0.75rem;
           font-weight: 400;
           line-height: 1.5;
           color: var(--text-secondary);
           text-align: left;
           box-shadow:
             0 8px 24px color-mix(in oklch, oklch(0 0 0) 50%, transparent),
             0 0 20px color-mix(in oklch, var(--control-accent) 10%, transparent);
           opacity: 0;
           visibility: hidden;
           pointer-events: none;
           transition: opacity 0.2s, transform 0.2s, visibility 0.2s;
           z-index: 100;
         }

         &[data-tooltip]:hover::after,
         &[data-tooltip]:focus-within::after {
           opacity: 1;
           visibility: visible;
           transform: translateY(0);
         }

         &.warning {
           border: 1px solid color-mix(in oklch, var(--risky) 30%, transparent);
           background: var(--risky-bg);
         }

         /* Custom Cyberpunk Checkbox/Radio */
         & input[type="checkbox"],
         & input[type="radio"] {
           -webkit-appearance: none;
           -moz-appearance: none;
           appearance: none;
           grid-row: span 2;
           width: 16px;
           height: 16px;
           margin: 0;
           cursor: pointer;
           position: relative;
           background: transparent;
           border: none;
         }

         & input[type="checkbox"]::before {
           content: '';
           position: absolute;
           inset: 0;
           background: linear-gradient(135deg, color-mix(in oklch, oklch(1 0 0) 3%, transparent), transparent);
           border: 1.5px solid color-mix(in oklch, oklch(1 0 0) 20%, transparent);
           border-radius: 3px;
           clip-path: polygon(0 3px, 3px 0, 100% 0, 100% calc(100% - 3px), calc(100% - 3px) 100%, 0 100%);
           transition: all 0.2s var(--ease-out-expo);
         }

         & input[type="checkbox"]::after {
           content: '';
           position: absolute;
           top: 50%;
           left: 50%;
           width: 5px;
           height: 8px;
           border: solid var(--control-accent);
           border-width: 0 2px 2px 0;
           transform: translate(-50%, -60%) rotate(45deg) scale(0);
           opacity: 0;
           transition: all 0.15s var(--ease-out-back);
         }

         & input[type="checkbox"]:checked::before {
           background: linear-gradient(135deg, var(--control-accent), color-mix(in oklch, var(--control-accent) 60%, transparent));
           border-color: var(--control-accent);
           box-shadow:
             0 0 10px var(--control-glow),
             0 0 20px var(--control-glow-soft),
             inset 0 0 8px color-mix(in oklch, oklch(1 0 0) 10%, transparent);
           animation: cyberpunkPulse 2.5s ease-in-out infinite;
         }

         & input[type="checkbox"]:checked::after {
           transform: translate(-50%, -60%) rotate(45deg) scale(1);
           opacity: 1;
           border-color: white;
         }

         & input[type="radio"]::before {
           content: '';
           position: absolute;
           inset: 1px;
           background: linear-gradient(135deg, color-mix(in oklch, oklch(1 0 0) 3%, transparent), transparent);
           border: 1.5px solid color-mix(in oklch, oklch(1 0 0) 20%, transparent);
           border-radius: 50%;
           transition: all 0.2s var(--ease-out-expo);
         }

         & input[type="radio"]::after {
           content: '';
           position: absolute;
           top: 50%;
           left: 50%;
           width: 6px;
           height: 6px;
           background: var(--control-accent);
           border-radius: 50%;
           transform: translate(-50%, -50%) scale(0);
           opacity: 0;
           transition: all 0.15s var(--ease-out-back);
           box-shadow: 0 0 6px var(--control-accent);
         }

         & input[type="radio"]:checked::before {
           border-color: var(--control-accent);
           background: linear-gradient(135deg, color-mix(in oklch, var(--control-accent) 15%, transparent), transparent);
           box-shadow:
             0 0 10px color-mix(in oklch, var(--control-accent) 40%, transparent),
             0 0 20px var(--control-glow-soft);
           animation: cyberpunkPulse 2.5s ease-in-out infinite;
         }

         & input[type="radio"]:checked::after {
           transform: translate(-50%, -50%) scale(1);
           opacity: 1;
         }

         &:hover input[type="checkbox"]:not(:checked)::before,
         &:hover input[type="radio"]:not(:checked)::before {
           border-color: var(--control-glow);
           box-shadow: 0 0 8px var(--control-glow-soft);
         }

         & input[type="checkbox"]:focus-visible::before,
         & input[type="radio"]:focus-visible::before {
           outline: 2px solid var(--control-accent);
           outline-offset: 2px;
         }
       }
     }

     legend {
       font-family: var(--font-ui);
       font-weight: 600;
       font-size: 0.85rem;
       padding: 0 var(--space-sm);
       display: flex;
       align-items: center;
       gap: var(--space-sm);
       text-transform: uppercase;
       letter-spacing: 0.06em;
       color: var(--text-secondary);
     }

    /* Tier badges */
    .tier {
      font-family: var(--font-ui);
      font-size: 0.65rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      position: relative;
      animation: tierGlow 3s ease-in-out infinite;
    }

    .tier-safe {
      background: linear-gradient(135deg, var(--safe) 0%, var(--safe-dim) 100%);
      color: oklch(0.15 0.05 175);
      box-shadow:
        0 0 12px color-mix(in oklch, var(--safe) 30%, transparent),
        0 0 24px color-mix(in oklch, var(--safe) 15%, transparent);
      text-shadow: 0 0 4px color-mix(in oklch, var(--safe) 30%, transparent);
    }

    .tier-caution {
      background: linear-gradient(135deg, var(--caution) 0%, var(--caution-dim) 100%);
      color: oklch(0.2 0.08 85);
      box-shadow:
        0 0 12px color-mix(in oklch, var(--caution) 30%, transparent),
        0 0 24px color-mix(in oklch, var(--caution) 15%, transparent);
      text-shadow: 0 0 4px color-mix(in oklch, var(--caution) 30%, transparent);
    }

    .tier-risky {
      background: linear-gradient(135deg, var(--risky) 0%, var(--risky-dim) 100%);
      color: oklch(1 0 0);
      box-shadow:
        0 0 12px color-mix(in oklch, var(--risky) 30%, transparent),
        0 0 24px color-mix(in oklch, var(--risky) 15%, transparent);
      text-shadow: 0 0 6px color-mix(in oklch, var(--risky) 40%, transparent);
    }

     .label-text {
       font-family: var(--font-ui);
       font-weight: 600;
       font-size: 0.9rem;
       letter-spacing: 0.01em;
       transition: color 0.2s, text-shadow 0.2s;
     }

     .label-hint {
       color: var(--text-hint);
       font-size: 0.72rem;
       grid-column: 2 / 4;
       display: inline-flex;
       align-items: center;
       gap: 4px;
       line-height: 1.3;
       margin-top: -1px;
     }

     /* Preset badges */
     .preset-badge {
       font-size: 0.6rem;
       font-weight: 600;
       text-transform: uppercase;
       letter-spacing: 0.04em;
       padding: 0.15rem 0.45rem;
       border-radius: 100px;
       background: var(--accent-glow);
       color: var(--accent);
       border: 1px solid color-mix(in oklch, var(--accent) 30%, transparent);
       white-space: nowrap;
       opacity: 1;
       transition: opacity 0.2s ease;
       grid-row: 1;
       grid-column: 3;
       align-self: center;

       &[hidden] {
         display: none;
       }

       &.faded {
         opacity: 0.4;
       }

       &[data-preset="competitive"] {
         background: color-mix(in oklch, var(--caution) 15%, transparent);
         color: var(--caution);
         border-color: color-mix(in oklch, var(--caution) 30%, transparent);
       }

       &[data-preset="streaming"] {
         background: color-mix(in oklch, oklch(0.6 0.2 270) 15%, transparent);
         color: oklch(0.7 0.15 270);
         border-color: color-mix(in oklch, oklch(0.6 0.2 270) 30%, transparent);
       }

       &[data-preset="balanced"] {
         background: color-mix(in oklch, var(--safe) 15%, transparent);
         color: var(--safe);
         border-color: color-mix(in oklch, var(--safe) 30%, transparent);
       }

       &[data-preset="minimal"] {
         background: color-mix(in oklch, oklch(0.7 0 0) 15%, transparent);
         color: oklch(0.7 0 0);
         border-color: color-mix(in oklch, oklch(0.7 0 0) 30%, transparent);
       }
     }

     .warning-icon {
       width: 14px;
       height: 14px;
       color: var(--risky);
       flex-shrink: 0;
     }

     /* Peripheral Section */
     .peripheral-title {
       font-family: var(--font-ui);
       font-size: 0.75rem;
       font-weight: 600;
       letter-spacing: 0.06em;
       text-transform: uppercase;
       color: var(--text-secondary);
       margin: 0 0 var(--space-xs);
     }

     .peripheral-note {
       font-size: 0.75rem;
       color: var(--text-hint);
       margin: -0.25rem 0 var(--space-sm);
     }

     .peripheral-scroll {
       max-height: 385px;
       overflow-y: auto;
       padding-right: var(--space-sm);
       margin-right: calc(var(--space-sm) * -1);
       scrollbar-width: thin;
       scrollbar-color: var(--border-light) transparent;

       &::-webkit-scrollbar {
         width: 6px;
       }

       &::-webkit-scrollbar-track {
         background: transparent;
       }

       &::-webkit-scrollbar-thumb {
         background: var(--border-light);
         border-radius: 3px;

         &:hover {
           background: var(--accent);
         }
       }
     }

     .peripheral-links {
       display: flex;
       flex-direction: column;
       gap: var(--space-xs);
     }

     .peripheral-link {
       display: grid;
       grid-template-columns: minmax(0, 1fr) auto;
       grid-template-rows: auto auto;
       column-gap: var(--space-md);
       row-gap: 0.2rem;
       padding: var(--space-sm) var(--space-md);
       border-radius: var(--radius-sm);
       background: linear-gradient(135deg, color-mix(in oklch, oklch(1 0 0) 4%, transparent), color-mix(in oklch, oklch(1 0 0) 1%, transparent));
       border: 1px solid var(--glass-border);
       color: var(--text-primary);
       text-decoration: none;
       backdrop-filter: blur(16px) saturate(1.2);
       box-shadow:
         inset 0 1px 0 color-mix(in oklch, oklch(1 0 0) 6%, transparent),
         0 6px 18px color-mix(in oklch, oklch(0 0 0) 20%, transparent);
       transition: border-color 0.2s, background 0.2s, transform 0.2s var(--ease-out-back);

       &:hover {
         border-color: color-mix(in oklch, oklch(1 0 0) 20%, transparent);
         background: linear-gradient(135deg, color-mix(in oklch, oklch(1 0 0) 7%, transparent), color-mix(in oklch, oklch(1 0 0) 2%, transparent));
         transform: translateY(-1px);
       }
     }

     .peripheral-link-title {
       font-family: var(--font-ui);
       font-size: 0.95rem;
       font-weight: 600;
       grid-column: 1;
     }

     .peripheral-link-hint {
       font-size: 0.75rem;
       color: var(--text-hint);
       grid-column: 1;
     }

     .peripheral-link-action {
       grid-column: 2;
       grid-row: 1 / span 2;
       align-self: center;
       display: inline-flex;
       align-items: center;
       gap: 0.35rem;
       padding: 0.35rem 0.7rem;
       border-radius: 999px;
       font-size: 0.7rem;
       font-weight: 600;
       letter-spacing: 0.06em;
       text-transform: uppercase;
       color: var(--text-primary);
       background: color-mix(in oklch, oklch(1 0 0) 6%, transparent);
       border: 1px solid color-mix(in oklch, oklch(1 0 0) 18%, transparent);
       box-shadow: inset 0 1px 0 color-mix(in oklch, oklch(1 0 0) 8%, transparent);

       & svg {
         width: 12px;
         height: 12px;
       }

       .peripheral-link:hover & {
         border-color: color-mix(in oklch, oklch(1 0 0) 32%, transparent);
         background: color-mix(in oklch, oklch(1 0 0) 12%, transparent);
       }
     }

     /* Presets */
     .presets {
       display: flex;
       gap: var(--space-sm);
       margin-bottom: var(--space-lg);
       flex-wrap: wrap;
     }

     .preset-btn {
       position: relative;
       padding: var(--space-sm) var(--space-lg);
       background: var(--bg-tertiary);
       border: 1px solid var(--border);
       border-radius: 100px;
       color: var(--text-secondary);
       font-family: var(--font-ui);
       font-size: 0.9rem;
       font-weight: 600;
       cursor: pointer;
       transition: all 0.3s var(--ease-out-expo);
       display: flex;
       align-items: center;
       gap: var(--space-sm);
       overflow: visible;
       isolation: isolate;

       &::before {
         content: '';
         position: absolute;
         inset: -6px;
         background: radial-gradient(
           circle at center,
           var(--accent-glow-strong) 0%,
           color-mix(in oklch, var(--accent) 20%, transparent) 40%,
           transparent 70%
         );
         border-radius: inherit;
         opacity: 0;
         transform: scale(0.6);
         transition: all 0.4s var(--ease-out-expo);
         z-index: -1;
         filter: blur(8px);
       }

       &:hover {
         border-color: var(--accent);
         color: var(--text-primary);
         transform: translateY(-3px) scale(1.02);
         box-shadow:
           0 8px 24px color-mix(in oklch, var(--accent) 25%, transparent),
           0 2px 8px color-mix(in oklch, oklch(0 0 0) 20%, transparent);
         background: color-mix(in oklch, var(--accent) 10%, transparent);
         text-shadow:
           0 0 8px color-mix(in oklch, var(--accent) 50%, transparent),
           0 0 16px color-mix(in oklch, var(--accent) 30%, transparent);

         &::before {
           opacity: 1;
           transform: scale(1.8);
         }
       }

       &.active {
         background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dim) 100%);
         border-color: var(--accent);
         color: white;
         box-shadow:
           0 6px 24px var(--accent-glow-strong),
           0 2px 8px color-mix(in oklch, oklch(0 0 0) 30%, transparent),
           inset 0 1px 0 color-mix(in oklch, oklch(1 0 0) 25%, transparent);
         text-shadow:
           0 0 6px color-mix(in oklch, oklch(1 0 0) 50%, transparent),
           0 0 12px color-mix(in oklch, var(--accent) 40%, transparent);

         &::before {
           opacity: 0.8;
           transform: scale(1.5);
           animation: presetGlowPulse 2s ease-in-out infinite;
         }
       }

       & .icon {
         width: 16px;
         height: 16px;
         flex-shrink: 0;
         transition: transform 0.3s var(--ease-out-back);
       }

       &:hover .icon {
         transform: scale(1.15);
       }
     }

     .legend-icon {
       width: 16px;
       height: 16px;
       opacity: 0.7;
       flex-shrink: 0;
     }

     /* Info button */
     .info-btn {
       width: 18px;
       height: 18px;
       padding: 0;
       margin-left: auto;
       background: color-mix(in oklch, oklch(1 0 0) 10%, transparent);
       border: 1px solid color-mix(in oklch, oklch(1 0 0) 15%, transparent);
       border-radius: 50%;
       color: var(--text-secondary);
       font-size: 11px;
       font-weight: 600;
       cursor: pointer;
       transition: all 0.2s;
       display: inline-flex;
       align-items: center;
       justify-content: center;

       &:hover {
         background: var(--accent);
         border-color: var(--accent);
         color: white;
         transform: scale(1.1);
       }
     }

     /* Help popover */
     .help-popover {
       position: fixed;
       inset: unset;
       max-width: 320px;
       padding: var(--space-lg);
       background: color-mix(in oklch, oklch(0.12 0.02 285) 95%, transparent);
       backdrop-filter: blur(20px);
       -webkit-backdrop-filter: blur(20px);
       border: 1px solid color-mix(in oklch, oklch(1 0 0) 10%, transparent);
       border-radius: var(--radius);
       box-shadow: 0 20px 60px color-mix(in oklch, oklch(0 0 0) 50%, transparent);
       color: var(--text-primary);

       &::backdrop {
         background: color-mix(in oklch, oklch(0 0 0) 50%, transparent);
         backdrop-filter: blur(4px);
       }

       & h4 {
         font-size: 0.95rem;
         font-weight: 600;
         margin-bottom: var(--space-md);
         color: var(--accent-hover);
       }

       & p {
         font-size: 0.85rem;
         line-height: 1.6;
         margin-bottom: var(--space-sm);
         color: var(--text-secondary);
       }

       & kbd {
         display: inline-block;
         padding: 0.15rem 0.4rem;
         background: var(--bg-card);
         border: 1px solid var(--border);
         border-radius: 4px;
         font-family: var(--font-mono);
         font-size: 0.75rem;
         color: var(--text-primary);
       }

       & .tip {
         margin-top: var(--space-md);
         padding: var(--space-sm) var(--space-md);
         background: var(--accent-glow);
         border-left: 3px solid var(--accent);
         border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
         font-size: 0.8rem;
         color: var(--accent-hover);
       }
     }

     /* Filter bar */
     .filter-bar {
       display: flex;
       flex-wrap: wrap;
       gap: 6px;
       margin-bottom: var(--space-md);
     }

     .filter {
       font-family: var(--font-ui);
       padding: 6px 12px;
       background: color-mix(in oklch, oklch(1 0 0) 3%, transparent);
       border: 1px solid var(--border);
       border-radius: 6px;
       color: var(--text-secondary);
       font-size: 0.8rem;
       font-weight: 600;
       cursor: pointer;
       transition: all 0.2s var(--ease-out-expo);
       display: inline-flex;
       align-items: center;
       gap: 6px;

       &:hover {
         background: color-mix(in oklch, oklch(1 0 0) 6%, transparent);
         border-color: var(--border-light);
         color: var(--text-primary);
       }

       &.active {
         background: var(--accent);
         border-color: var(--accent);
         color: white;
         text-shadow:
           0 0 6px color-mix(in oklch, oklch(1 0 0) 40%, transparent),
           0 0 12px color-mix(in oklch, var(--accent) 50%, transparent);
       }
       & .count {
         font-size: 0.65rem;
         font-weight: 600;
         opacity: 0.7;
       }

       &.active .count {
         opacity: 1;
       }
     }

     /* Software toolbar */
     .software-toolbar {
       display: flex;
       align-items: center;
       gap: var(--space-md);
       margin-bottom: var(--space-md);
     }

     .search-wrap {
       flex: 1;
       position: relative;
     }

     .search-icon {
       position: absolute;
       left: 12px;
       top: 50%;
       transform: translateY(-50%);
       width: 16px;
       height: 16px;
       color: var(--text-hint);
       pointer-events: none;
     }

     .search-input {
       width: 100%;
       padding: 10px 12px 10px 40px;
       background: color-mix(in oklch, oklch(1 0 0) 3%, transparent);
       border: 1px solid var(--border);
       border-radius: var(--radius);
       color: var(--text-primary);
       font-size: 0.875rem;
       font-family: inherit;
       transition: all 0.2s;

       &::placeholder {
         color: var(--text-hint);
       }

       &:focus {
         outline: none;
         border-color: var(--accent);
         background: color-mix(in oklch, oklch(1 0 0) 5%, transparent);
         box-shadow: 0 0 0 3px var(--accent-glow);
       }
     }

     .view-toggle {
       display: flex;
       background: color-mix(in oklch, oklch(1 0 0) 3%, transparent);
       border: 1px solid var(--border);
       border-radius: var(--radius);
       padding: 2px;
     }

     .view-btn {
       padding: 8px;
       background: transparent;
       border: none;
       border-radius: calc(var(--radius) - 2px);
       color: var(--text-hint);
       cursor: pointer;
       transition: all 0.2s;
       display: flex;
       align-items: center;
       justify-content: center;

       & svg {
         width: 16px;
         height: 16px;
       }

       &:hover {
         color: var(--text-primary);
       }

       &.active {
         background: var(--accent);
         color: white;
       }
     }

     /* Software scroll container */
     .software-scroll {
       max-height: 480px;
       overflow-y: auto;
       padding-right: var(--space-sm);
       margin-right: calc(var(--space-sm) * -1);
       scrollbar-width: thin;
       scrollbar-color: var(--border-light) transparent;

       &::-webkit-scrollbar {
         width: 6px;
       }

       &::-webkit-scrollbar-track {
         background: transparent;
       }

       &::-webkit-scrollbar-thumb {
         background: var(--border-light);
         border-radius: 3px;

         &:hover {
           background: var(--accent);
         }
       }
     }

     /* Software grid */
     .software-grid {
       display: grid;
       grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
       gap: var(--space-md);
       perspective: 1200px;
       perspective-origin: center center;

       &.list-view {
         grid-template-columns: 1fr;
         gap: var(--space-xs);

         & .software-card {
           aspect-ratio: unset;
           height: auto;
         }

         & .software-card-inner {
           position: relative;
         }

         & .software-card-front {
           position: relative;
           flex-direction: row;
           justify-content: flex-start;
           padding: var(--space-sm) var(--space-md);
           gap: var(--space-md);
           opacity: 1 !important;
         }

         & .software-card-back {
           display: none;
         }

         & .software-card .logo {
           width: 32px;
           height: 32px;
           margin: 0;
         }

         & .software-card .name {
           font-size: 0.875rem;
           text-align: left;
           flex: 1;
         }

         & .software-card .list-desc {
           display: block;
           color: var(--text-hint);
           font-size: 0.75rem;
           flex: 2;
         }

         & .software-card .list-category {
           display: block;
           font-size: 0.65rem;
           text-transform: uppercase;
           letter-spacing: 0.05em;
           color: var(--text-hint);
           width: 80px;
           text-align: right;
         }
       }
     }

    /* Software Card styles are now in: src/components/software-card/software-card.styles.css */

    /* Selection counter */
     .selection-counter {
       display: inline-flex;
       align-items: center;
       gap: var(--space-sm);
       padding: var(--space-xs) var(--space-md);
       background: var(--accent-glow);
       border: 1px solid var(--accent);
       border-radius: 100px;
       font-family: var(--font-ui);
       font-size: 0.85rem;
       font-weight: 600;
       color: var(--accent-hover);
       margin-left: auto;
     }

     /* Summary */
     .summary {
       position: relative;
       background:
         linear-gradient(
           var(--light-angle),
           color-mix(in oklch, oklch(1 0 0) 6%, transparent) 0%,
           color-mix(in oklch, oklch(1 0 0) 2%, transparent) 50%,
           transparent 100%
         ),
         color-mix(in oklch, oklch(0.15 0.02 285) 40%, transparent);
       backdrop-filter: blur(var(--glass-depth-3)) saturate(1.4);
       -webkit-backdrop-filter: blur(var(--glass-depth-3)) saturate(1.4);
       border: 1px solid color-mix(in oklch, oklch(1 0 0) 12%, transparent);
       border-radius: var(--radius-lg);
       box-shadow:
         0 24px 60px color-mix(in oklch, oklch(0 0 0) 45%, transparent),
         0 0 80px color-mix(in oklch, var(--accent) 8%, transparent),
         inset 0 1px 1px color-mix(in oklch, oklch(1 0 0) 10%, transparent),
         inset 0 -2px 4px color-mix(in oklch, oklch(0 0 0) 15%, transparent);
       padding: var(--space-lg);
       margin-bottom: var(--space-lg);
       display: grid;
       grid-template-columns: repeat(3, 1fr);
       gap: var(--space-md);
       transform-style: preserve-3d;
       transition: all 0.3s var(--ease-out-expo);

       &::before {
         content: '';
         position: absolute;
         inset: 0;
         background: radial-gradient(
           ellipse 100% 60% at 50% 0%,
           color-mix(in oklch, var(--accent) 8%, transparent),
           transparent 50%
         );
         border-radius: inherit;
         pointer-events: none;
       }

       &:hover {
         transform: translateY(-2px);
         box-shadow:
           0 28px 70px color-mix(in oklch, oklch(0 0 0) 50%, transparent),
           0 0 100px color-mix(in oklch, var(--accent) 10%, transparent),
           inset 0 1px 1px color-mix(in oklch, oklch(1 0 0) 12%, transparent),
           inset 0 -2px 4px color-mix(in oklch, oklch(0 0 0) 15%, transparent);
       }
     }

     .summary-item {
       text-align: center;
       padding: var(--space-sm);

       &:not(:last-child) {
         border-right: 1px solid var(--border);
       }
     }

    .summary-value {
      font-family: var(--font-display);
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: var(--space-xs);
      letter-spacing: 0.02em;
      /* Metallic engraved titanium effect */
      background: linear-gradient(
        180deg,
        oklch(0.92 0.01 285) 0%,
        oklch(0.78 0.02 285) 45%,
        oklch(0.65 0.02 285) 55%,
        oklch(0.85 0.01 285) 100%
      );
      background-clip: text;
      -webkit-background-clip: text;
      color: transparent;
      text-shadow:
        0 1px 1px oklch(0 0 0 / 50%),
        0 -1px 0 oklch(1 0 0 / 15%);
      filter: drop-shadow(0 2px 4px oklch(0 0 0 / 30%));
    }

     .summary-label {
       font-family: var(--font-ui);
       color: var(--text-hint);
       font-size: 0.75rem;
       font-weight: 600;
       text-transform: uppercase;
       letter-spacing: 0.08em;
     }

     /* Download actions */
     .download-actions {
       display: flex;
       gap: var(--space-md);
       margin-bottom: var(--space-lg);

       & .download-btn {
         flex: 2;
       }

       & .btn-secondary {
         flex: 1;
       }
     }

     /* Download button with shimmer */
     .download-btn {
       display: flex;
       align-items: center;
       justify-content: center;
       gap: var(--space-md);
       width: 100%;
       padding: var(--space-lg) var(--space-xl);
       background-image: linear-gradient(
         315deg,
         oklch(var(--shimmer-l-1) var(--shimmer-c-1) var(--shimmer-hue-1)) 0%,
         oklch(var(--shimmer-l-2) var(--shimmer-c-2) var(--shimmer-hue-2)) 47%,
         oklch(var(--shimmer-l-3) var(--shimmer-c-3) var(--shimmer-hue-3)) 100%
       );
       border: none;
       border-radius: 0.66em;
       color: #fff;
       font-family: var(--font-display);
       font-size: 1.125rem;
       font-weight: 700;
       letter-spacing: 0.04em;
       text-transform: uppercase;
       cursor: pointer;
       position: relative;
       isolation: isolate;
       overflow: hidden;
       box-shadow:
         0 2px 3px 1px oklch(0.2 0.1 150 / 60%),
         0 0 20px oklch(0.45 0.2 145 / 30%);
       scale: 1;
       transition: all var(--spring-duration) var(--spring-easing);

       & .download-btn-content {
         display: grid;
         & div {
          display: flex;
          gap: 8px;
          align-items: center;
          justify-content: center;
         }
       }

       & .shimmer {
         position: absolute;
         inset: -38px;
         border-radius: inherit;
         mix-blend-mode: plus-lighter;
         pointer-events: none;

         &::before,
         &::after {
           transition: all 0.5s ease;
           opacity: 0;
           content: "";
           border-radius: inherit;
           position: absolute;
           inset: 40px;
         }

         &::before {
           box-shadow:
             0 0 4px 2px oklch(0.7 0.2 var(--shimmer-hue-3)),
             0 0 10px 5px oklch(0.65 0.2 var(--shimmer-hue-2)),
             0 0 20px 10px oklch(0.55 0.18 var(--shimmer-hue-1)),
             0 0 35px 12px oklch(0.45 0.15 var(--shimmer-hue-2));
           z-index: -1;
         }

         &::after {
           box-shadow:
             inset 0 0 0 1px oklch(0.75 0.2 var(--shimmer-hue-3)),
             inset 0 0 4px 2px oklch(0.7 0.2 var(--shimmer-hue-2)),
             inset 0 0 12px 2px oklch(0.6 0.18 var(--shimmer-hue-1));
           z-index: 2;
         }
       }

       &:hover:not(:active):not([disabled]) {
         scale: 1.05;
         transition-duration: calc(var(--spring-duration) * 0.5);
       }

       &:active:not([disabled]) {
         scale: 1.02;
         transition-duration: calc(var(--spring-duration) * 0.5);
       }

       &:focus .shimmer,
       &:active .shimmer {
         animation-play-state: paused !important;
         mask-image: none !important;
       }

       &:hover:not([disabled]),
       &:hover:not([disabled]) .shimmer::before,
       &:hover:not([disabled]) .shimmer::after {
         opacity: 1;
       }

       & .text {
         color: transparent;
         background-clip: text;
         -webkit-background-clip: text;
         background-color: #fff;
         background-image: linear-gradient(
           120deg,
           transparent,
           oklch(0.85 0.15 var(--shimmer-hue-3) / 90%) 40%,
           oklch(0.95 0.1 120 / 100%) 50%,
           transparent 52%
         );
         background-repeat: no-repeat;
         background-size: 300% 300%;
         background-position: center 200%;
       }

       &:not([disabled]):hover .text {
         animation: shimmerTextWipe 0.66s ease-in-out 1;
       }

       &:not([disabled]) .shimmer::before,
       &:not([disabled]) .shimmer::after {
         opacity: 1;
       }

       &:not([disabled]) .shimmer {
         mask-image: linear-gradient(
           90deg,
           transparent 15%,
           black 45%,
           black 55%,
           transparent 85%
         );
         mask-size: 200% 200%;
         mask-position: center;
         animation: shimmerWipe 3s linear infinite both -0.5s;
       }

       & .btn-icon {
         width: 20px;
         height: 20px;
         flex-shrink: 0;
         position: relative;
         z-index: 1;
         color: color-mix(in oklch, oklch(1 0 0) 95%, transparent);
       }

       & code {
         font-family: var(--font-mono);
         font-size: 0.7rem;
         font-weight: 500;
         position: relative;
         z-index: 1;
         color: color-mix(in oklch, oklch(1 0 0) 90%, transparent);
       }
     }

     .btn-secondary {
       display: flex;
       align-items: center;
       justify-content: center;
       gap: var(--space-sm);
       flex: 1;
       padding: var(--space-md) var(--space-lg);
       background: var(--bg-tertiary);
       border: 1px solid var(--border-light);
       border-radius: var(--radius);
       color: var(--text-secondary);
       font-family: var(--font-ui);
       font-size: 0.9rem;
       font-weight: 600;
       cursor: pointer;
       transition: all 0.2s var(--ease-out-expo);

       &:hover {
         background: var(--bg-card-hover);
         border-color: var(--accent);
         color: var(--text-primary);
       }

       & .btn-icon {
         width: 16px;
         height: 16px;
         flex-shrink: 0;
       }

       &.small {
         padding: 0.35rem 0.6rem;
         font-size: 0.78rem;
       }
     }

     .instructions {
       margin-top: var(--space-lg);
       padding: var(--space-md) var(--space-lg);
       background: var(--bg-tertiary);
       border-radius: var(--radius);
       font-size: 0.85rem;
       color: var(--text-secondary);
       text-align: center;
       border: 1px solid var(--border);

       & code {
         background: var(--bg-primary);
         padding: 0.15rem 0.5rem;
         border-radius: 4px;
         font-family: var(--font-mono);
         font-size: 0.8rem;
         color: var(--accent-hover);
       }
     }

     /* Driver Links Section */
     .driver-links {
       margin-top: var(--space-lg);
       padding: var(--space-lg);
       background: linear-gradient(135deg, color-mix(in oklch, var(--accent) 5%, transparent) 0%, color-mix(in oklch, oklch(0.6 0.15 250) 3%, transparent) 100%);
       border: 1px solid color-mix(in oklch, var(--accent) 15%, transparent);
       border-radius: var(--radius-lg);
     }

     .driver-links-title {
       display: flex;
       align-items: center;
       gap: var(--space-sm);
       font-size: 1rem;
       font-weight: 600;
       color: var(--text-primary);
       margin: 0 0 var(--space-xs);
     }

     .driver-icon {
       width: 18px;
       height: 18px;
       color: var(--accent);
     }

     .driver-links-desc {
       color: var(--text-secondary);
       font-size: 0.85rem;
       margin: 0 0 var(--space-lg);
     }

     .driver-card {
       background: var(--bg-card);
       border: 1px solid var(--border);
       border-radius: var(--radius);
       padding: var(--space-md);
       transition: all 0.2s ease;
       opacity: 0.5;
       pointer-events: none;

       &.active {
         opacity: 1;
         pointer-events: auto;
         border-color: var(--border-light);

         &:hover {
           border-color: var(--accent);
           background: var(--bg-card-hover);
           transform: translateY(-2px);
           box-shadow: 0 4px 12px color-mix(in oklch, oklch(0 0 0) 20%, transparent);
         }
       }

      &--mobo,
      &--monitor {
        opacity: 1;
        pointer-events: auto;
        border-color: var(--border-light);
      }

      &--mobo {
        grid-column: span 1;
      }

      &--monitor {
        grid-column: span 2;
      }
    }

    /* Explicit selectors for mobo/monitor to ensure visibility */
    .driver-card.driver-card--mobo,
    .driver-card.driver-card--monitor {
      opacity: 1;
      pointer-events: auto;
      border-color: var(--border-light);

      &:hover {
        border-color: var(--accent);
        background: var(--bg-card-hover);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px color-mix(in oklch, oklch(0 0 0) 20%, transparent);
      }
    }

    .driver-card-header {
       display: flex;
       align-items: center;
       gap: var(--space-sm);
       margin-bottom: var(--space-xs);

       & h4 {
         font-family: var(--font-ui);
         font-size: 0.95rem;
         font-weight: 700;
         margin: 0;
         color: var(--text-primary);
       }
     }

     .driver-badge {
       font-size: 0.55rem;
       font-weight: 700;
       text-transform: uppercase;
       letter-spacing: 0.05em;
       padding: 0.15rem 0.4rem;
       border-radius: 4px;

       &.cpu {
         background: color-mix(in oklch, oklch(0.7 0.15 45) 25%, transparent);
         color: oklch(0.8 0.12 55);
       }

       &.gpu {
         background: color-mix(in oklch, oklch(0.65 0.2 145) 25%, transparent);
         color: oklch(0.75 0.18 145);
       }

       &.mobo {
         background: color-mix(in oklch, oklch(0.65 0.18 270) 25%, transparent);
         color: oklch(0.8 0.12 270);
       }

       &.monitor {
         background: color-mix(in oklch, oklch(0.7 0.15 200) 25%, transparent);
         color: oklch(0.8 0.12 200);
       }
     }

     .driver-card p {
       font-size: 0.8rem;
       color: var(--text-secondary);
       margin: 0 0 var(--space-sm);
       line-height: 1.4;
     }

     .driver-link {
       display: inline-flex;
       align-items: center;
       gap: var(--space-xs);
       font-size: 0.8rem;
       font-weight: 500;
       color: var(--accent);
       text-decoration: none;
       transition: color 0.2s;

       &:hover {
         color: var(--accent-hover);
       }

       & svg {
         width: 14px;
         height: 14px;
       }
     }

     .mobo-links,
     .monitor-links {
       display: flex;
       flex-wrap: wrap;
       gap: var(--space-sm);

       & a {
         display: inline-flex;
         align-items: center;
         gap: 0.35rem;
         padding: 0.35rem 0.75rem;
         background: color-mix(in oklch, oklch(1 0 0) 5%, transparent);
         border: 1px solid var(--border);
         border-radius: var(--radius-sm);
         font-size: 0.75rem;
         font-weight: 500;
         color: var(--text-primary);
         text-decoration: none;
         transition: all 0.2s;

         & svg {
           width: 10px;
           height: 10px;
           opacity: 0.6;
           flex-shrink: 0;
         }

         &:hover {
           background: var(--accent);
           border-color: var(--accent);
           color: white;

           & svg {
             opacity: 1;
           }
         }
       }
     }

     .monitor-links a:hover {
       background: oklch(0.8 0.12 200);
       border-color: oklch(0.8 0.12 200);
       color: oklch(0.15 0.02 285);
     }

     .hardware-drivers-fieldset {
       margin-top: var(--space-lg);
     }

     .monitor-title {
       font-size: 0.7rem;
       font-weight: 600;
       letter-spacing: 0.08em;
       text-transform: uppercase;
       color: var(--text-secondary);
       margin-bottom: var(--space-xs);
     }

     .monitor-scroll {
       max-height: 180px;
       overflow-y: auto;
       padding-right: var(--space-sm);
       margin-right: calc(var(--space-sm) * -1);
       scrollbar-width: thin;
       scrollbar-color: var(--border-light) transparent;

       &::-webkit-scrollbar {
         width: 6px;
       }

       &::-webkit-scrollbar-track {
         background: transparent;
       }

       &::-webkit-scrollbar-thumb {
         background: var(--border-light);
         border-radius: 3px;

         &:hover {
           background: var(--accent);
         }
       }
     }

     .monitor-brand-links {
       display: flex;
       flex-direction: column;
       gap: var(--space-xs);

       & a {
         display: inline-flex;
         align-items: center;
         gap: 0.35rem;
         padding: 0.35rem 0.75rem;
         background: color-mix(in oklch, oklch(1 0 0) 5%, transparent);
         border: 1px solid var(--border);
         border-radius: var(--radius-sm);
         font-size: 0.75rem;
         font-weight: 500;
         color: var(--text-primary);
         text-decoration: none;
         transition: all 0.2s;

         & svg {
           width: 10px;
           height: 10px;
           opacity: 0.6;
           flex-shrink: 0;
           margin-left: auto;
         }

         &:hover {
           background: oklch(0.8 0.12 200);
           border-color: oklch(0.8 0.12 200);
           color: oklch(0.15 0.02 285);

           & svg {
             opacity: 1;
           }
         }
       }
     }

     /* Script Preview Modal */
     .preview-modal {
       position: fixed;
       top: 50%;
       left: 50%;
       transform: translate(-50%, -50%);
       max-width: 90vw;
       max-height: 85vh;
       width: 800px;
       padding: 0;
       background: var(--bg-secondary);
       border: 1px solid var(--border-light);
       border-radius: var(--radius-lg);
       box-shadow: 0 25px 50px -12px color-mix(in oklch, oklch(0 0 0) 50%, transparent);
       overflow: hidden;

       &::backdrop {
         background: color-mix(in oklch, oklch(0 0 0) 70%, transparent);
         backdrop-filter: blur(4px);
       }
     }

     .modal-header {
       display: flex;
       justify-content: space-between;
       align-items: center;
       padding: var(--space-lg);
       border-bottom: 1px solid var(--border);

       & h3 {
         font-family: var(--font-display);
         margin: 0;
         font-size: 1.25rem;
         font-weight: 700;
         letter-spacing: 0.02em;
         text-transform: uppercase;
         color: var(--text-primary);
       }
     }

     .modal-close {
       background: none;
       border: none;
       font-size: 1.5rem;
       color: var(--text-secondary);
       cursor: pointer;
       padding: 0;
       line-height: 1;

       &:hover {
         color: var(--text-primary);
       }
     }

     .preview-code {
       margin: 0;
       padding: 0;
       max-height: 50vh;
       overflow: auto;
       background: var(--bg-primary);
       font-family: var(--font-mono);
       font-size: 0.75rem;
       line-height: 1.6;
       color: var(--text-secondary);
       white-space: pre;
       counter-reset: line;

       & .line {
         display: block;
         padding: 0 var(--space-lg) 0 3.5rem;
         position: relative;

         &::before {
           content: counter(line);
           counter-increment: line;
           position: absolute;
           left: 0;
           width: 2.5rem;
           text-align: right;
           color: var(--text-hint);
           padding-right: var(--space-sm);
           border-right: 1px solid var(--border);
           margin-right: var(--space-md);
           user-select: none;
         }

         &:hover {
           background: color-mix(in oklch, var(--accent) 5%, transparent);
         }
       }

       & .comment { color: oklch(0.55 0 0); font-style: italic; }
       & .keyword { color: oklch(0.75 0.15 300); }
       & .string { color: oklch(0.7 0.18 160); }
       & .variable { color: oklch(0.7 0.15 240); }
       & .cmdlet { color: oklch(0.75 0.18 340); }
       & .operator { color: oklch(0.8 0.15 85); }
       & .section { color: var(--accent); font-weight: 600; }
     }

     .preview-section {
       background: color-mix(in oklch, var(--accent) 10%, transparent);
       border-left: 3px solid var(--accent);
       margin: var(--space-md) 0;
       padding: var(--space-sm) var(--space-md);
       font-weight: 600;
       color: var(--accent);
       cursor: pointer;
       display: flex;
       justify-content: space-between;
       align-items: center;

       &:hover {
         background: color-mix(in oklch, var(--accent) 15%, transparent);
       }

       & .toggle {
         transition: transform 0.2s;
       }

       &.collapsed .toggle {
         transform: rotate(-90deg);
       }
     }

     .preview-section-content {
       overflow: hidden;
       transition: max-height 0.3s ease;

       &.collapsed {
         max-height: 0 !important;
       }
     }

     .modal-footer {
       display: flex;
       gap: var(--space-md);
       padding: var(--space-lg);
       border-top: 1px solid var(--border);

       & .btn-secondary,
       & .download-btn {
         flex: 1;
         justify-content: center;
       }
     }

     /* Wizard Mode Toggle */
     .wizard-toggle {
       display: flex;
       align-items: center;
       gap: var(--space-md);
       padding: var(--space-md) var(--space-lg);
       background: var(--bg-tertiary);
       border: 1px solid var(--border);
       border-radius: var(--radius);
       margin-bottom: var(--space-xl);
     }

     .toggle-switch {
       position: relative;
       width: 48px;
       height: 24px;
       flex-shrink: 0;

       & input {
         opacity: 0;
         width: 0;
         height: 0;

         &:checked + .toggle-slider {
           background: var(--accent);

           &::before {
             transform: translateX(24px);
           }
         }
       }
     }

     .toggle-slider {
       position: absolute;
       cursor: pointer;
       top: 0;
       left: 0;
       right: 0;
       bottom: 0;
       background: var(--border-light);
       border-radius: 24px;
       transition: all 0.3s;

       &::before {
         position: absolute;
         content: "";
         height: 18px;
         width: 18px;
         left: 3px;
         bottom: 3px;
         background: var(--text-primary);
         border-radius: 50%;
         transition: all 0.3s;
       }
     }

     .toggle-label {
       display: flex;
       flex-direction: column;
       gap: 2px;
     }

     .toggle-hint {
       font-size: 0.85rem;
       color: var(--text-secondary);
     }

     /* Wizard Modal */
     .wizard-modal {
       position: fixed;
       top: 50%;
       left: 50%;
       transform: translate(-50%, -50%);
       max-width: 500px;
       width: 90vw;
       padding: 0;
       background: var(--bg-secondary);
       border: 1px solid var(--border-light);
       border-radius: var(--radius-lg);
       box-shadow: 0 25px 50px -12px color-mix(in oklch, oklch(0 0 0) 50%, transparent);

       &::backdrop {
         background: color-mix(in oklch, oklch(0 0 0) 70%, transparent);
         backdrop-filter: blur(4px);
       }
     }

     .wizard-content {
       padding: var(--space-xl);

       & h3 {
         font-family: var(--font-ui);
         margin: 0 0 var(--space-md);
         font-size: 1.3rem;
         font-weight: 700;
       }
     }

     .wizard-risk {
       margin-bottom: var(--space-lg);
     }

     .wizard-description {
       color: var(--text-secondary);
       margin-bottom: var(--space-lg);
       line-height: 1.6;
     }

     .wizard-details {
       background: var(--bg-primary);
       border-radius: var(--radius);
       padding: var(--space-md);
       margin-bottom: var(--space-lg);

       & h4 {
         font-size: 0.85rem;
         color: var(--text-hint);
         margin-bottom: var(--space-sm);
       }

       & ul {
         margin: 0;
         padding-left: var(--space-lg);
         font-size: 0.85rem;
         color: var(--text-secondary);
       }

       & li {
         margin: var(--space-xs) 0;
       }

       & code {
         background: color-mix(in oklch, var(--accent) 10%, transparent);
         padding: 0.1rem 0.3rem;
         border-radius: 3px;
         font-size: 0.8rem;
       }
     }

     .wizard-actions {
       display: flex;
       gap: var(--space-md);

       & button {
         flex: 1;
       }
     }

     /* Pre-Flight Check */
     .preflight-section {
       margin: var(--space-xl) 0;
       padding: var(--space-lg);
       background: color-mix(in oklch, var(--accent) 5%, transparent);
       border: 1px solid color-mix(in oklch, var(--accent) 20%, transparent);
       border-radius: var(--radius-lg);
     }

     .preflight-title {
       display: flex;
       align-items: center;
       gap: var(--space-sm);
       font-family: var(--font-ui);
       font-size: 1.1rem;
       font-weight: 600;
       color: var(--accent);
       margin-bottom: var(--space-lg);
     }

     .preflight-icon {
       width: 20px;
       height: 20px;
     }

     .preflight-items {
       display: grid;
       grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
       gap: var(--space-md);
     }

     .preflight-card {
       background: var(--bg-card);
       border: 1px solid var(--border);
       border-radius: var(--radius);
       padding: var(--space-md);
       position: relative;

       & h4 {
         font-family: var(--font-ui);
         margin: var(--space-sm) 0 var(--space-xs);
         font-size: 1rem;
         font-weight: 600;
       }

       & p {
         font-size: 0.8rem;
         color: var(--text-secondary);
         margin-bottom: var(--space-sm);
       }
     }

     .prereq-badge {
       display: inline-block;
       font-size: 0.65rem;
       font-weight: 600;
       text-transform: uppercase;
       padding: 0.15rem 0.5rem;
       border-radius: 4px;

       &.required {
         background: color-mix(in oklch, var(--risky) 20%, transparent);
         color: var(--risky);
       }

       &.recommended {
         background: color-mix(in oklch, var(--caution) 20%, transparent);
         color: var(--caution);
       }
     }

     .prereq-link {
       display: inline-flex;
       align-items: center;
       gap: var(--space-xs);
       font-size: 0.8rem;
       color: var(--accent);
       text-decoration: none;
       background: none;
       border: none;
       cursor: pointer;
       padding: 0;

       &:hover {
         color: var(--accent-hover);
       }

       & svg {
         width: 14px;
         height: 14px;
       }
     }

     /* Profile actions */
     .profile-actions {
       display: flex;
       gap: var(--space-md);
       margin-bottom: var(--space-lg);
     }

     /* Code Viewer */
     .code-viewer {
       display: flex;
       flex-direction: column;
       gap: var(--space-sm);
       background: radial-gradient(120% 140% at 20% 20%, color-mix(in oklch, var(--accent) 18%, transparent), transparent 55%), radial-gradient(140% 160% at 80% 0%, color-mix(in oklch, oklch(0.6 0.15 250) 16%, transparent), transparent 60%), linear-gradient(135deg, color-mix(in oklch, oklch(0.1 0.02 285) 96%, transparent), color-mix(in oklch, oklch(0.08 0.02 285) 98%, transparent));
       border: 1px solid var(--glass-border);
       border-radius: var(--radius-lg);
       padding: var(--space-sm);
       box-shadow:
         0 20px 60px color-mix(in oklch, oklch(0 0 0) 55%, transparent),
         inset 0 1px 0 color-mix(in oklch, oklch(1 0 0) 5%, transparent);
       backdrop-filter: blur(16px);
       position: relative;
       overflow: hidden;

       &.modal {
         max-height: 70vh;
       }

       &::after {
         content: "";
         position: absolute;
         inset: 0;
         background: linear-gradient(120deg, color-mix(in oklch, oklch(1 0 0) 5%, transparent), transparent 50%, color-mix(in oklch, oklch(1 0 0) 4%, transparent));
         pointer-events: none;
         mix-blend-mode: screen;
       }
     }

     .cv-toolbar {
       display: flex;
       align-items: center;
       gap: var(--space-xs);
       position: relative;
       z-index: 1;
     }

     .cv-tab {
       border: 1px solid var(--border-light);
       background: color-mix(in oklch, oklch(1 0 0) 2%, transparent);
       color: var(--text-primary);
       padding: 0.35rem 0.75rem;
       border-radius: var(--radius);
       font-size: 0.8rem;
       cursor: pointer;
       transition: all 0.2s ease;
       backdrop-filter: blur(6px);

       &:hover {
         border-color: var(--accent);
         color: var(--accent-hover);
         transform: translateY(-1px);
       }

       &.active {
         background: linear-gradient(135deg, color-mix(in oklch, var(--accent) 20%, transparent), color-mix(in oklch, oklch(0.6 0.15 250) 20%, transparent));
         border-color: var(--accent);
         color: #fff;
         box-shadow: 0 8px 24px color-mix(in oklch, var(--accent) 25%, transparent);
       }
     }

     .cv-pill {
       margin-left: auto;
       padding: 0.25rem 0.6rem;
       border-radius: 999px;
       background: color-mix(in oklch, oklch(1 0 0) 6%, transparent);
       border: 1px solid color-mix(in oklch, oklch(1 0 0) 8%, transparent);
       font-size: 0.72rem;
       color: var(--text-secondary);
       letter-spacing: 0.02em;
     }

     .cv-body {
       position: relative;
       border: 1px solid var(--border);
       border-radius: var(--radius);
       background: var(--bg-primary);
       overflow: hidden;
       min-height: 260px;
       box-shadow: inset 0 1px 0 color-mix(in oklch, oklch(1 0 0) 4%, transparent);
     }

     .cv-pane {
       display: none;
       margin: 0;
       padding: var(--space-md);
       font-family: var(--font-mono);
       font-size: 0.8rem;
       line-height: 1.55;
       color: var(--text-secondary);
       white-space: pre;
       overflow: auto;
       max-height: 48vh;

       &.active {
         display: block;
       }
     }

     .cv-edit {
       width: 100%;
       height: 100%;
       min-height: 260px;
       resize: vertical;
       background: color-mix(in oklch, oklch(0 0 0) 35%, transparent);
       color: var(--text-primary);
       border: none;
       outline: none;
     }

     .cv-diff {
       white-space: pre-wrap;
       background: radial-gradient(140% 120% at 20% 30%, color-mix(in oklch, var(--accent) 8%, transparent), transparent 45%), var(--bg-primary);
     }

     .cv-line {
       display: grid;
       grid-template-columns: 44px 44px 1fr;
       gap: var(--space-xs);
       padding: 2px 0;
       align-items: flex-start;

       &.diff-focus {
         background: color-mix(in oklch, var(--accent) 15%, transparent) !important;
         box-shadow: inset 0 0 0 1px color-mix(in oklch, var(--accent) 40%, transparent);
         animation: diff-pulse 0.3s ease-out;
       }
     }

     .cv-ln {
       font-size: 0.72rem;
       color: var(--text-hint);
       text-align: right;
       user-select: none;
     }

     .cv-code {
       white-space: pre-wrap;
     }

     .diff-added {
       background: color-mix(in oklch, oklch(0.65 0.2 145) 8%, transparent);
       border-left: 2px solid color-mix(in oklch, oklch(0.65 0.2 145) 65%, transparent);
     }

     .diff-removed {
       background: color-mix(in oklch, var(--risky) 8%, transparent);
       border-left: 2px solid color-mix(in oklch, var(--risky) 65%, transparent);
     }

     .diff-unchanged {
       border-left: 2px solid transparent;
     }

     .cv-nav {
       display: flex;
       align-items: center;
       gap: 0.35rem;
       margin-left: auto;
       margin-right: var(--space-xs);
     }

     .cv-nav-btn {
       display: flex;
       align-items: center;
       justify-content: center;
       width: 24px;
       height: 24px;
       padding: 0;
       border: 1px solid var(--border);
       background: color-mix(in oklch, oklch(1 0 0) 2%, transparent);
       border-radius: var(--radius-sm);
       color: var(--text-secondary);
       cursor: pointer;
       transition: all 0.15s ease;

       & svg {
         width: 14px;
         height: 14px;
       }

       &:hover:not(:disabled) {
         background: color-mix(in oklch, var(--accent) 15%, transparent);
         border-color: var(--accent);
         color: var(--accent);
       }

       &:disabled {
         opacity: 0.3;
         cursor: not-allowed;
       }
     }

     .cv-nav-count {
       font-size: 0.7rem;
       font-weight: 500;
       color: var(--text-secondary);
       min-width: 32px;
       text-align: center;
     }

     .cv-footer {
       display: flex;
       align-items: center;
       justify-content: space-between;
       padding: 0 var(--space-sm);
       color: var(--text-hint);
       font-size: 0.78rem;
       z-index: 1;
     }

     .cv-stats {
       display: flex;
       gap: var(--space-sm);
       align-items: center;
     }

     .cv-actions {
       display: flex;
       gap: var(--space-xs);
       align-items: center;
     }

     /* Audit Panel */
     .audit-panel {
       position: fixed;
       right: -480px;
       top: 50%;
       transform: translateY(-50%);
       width: 520px;
       max-height: 76vh;
       background: linear-gradient(135deg, color-mix(in oklch, oklch(0.12 0.02 285) 95%, transparent) 0%, color-mix(in oklch, oklch(0.1 0.02 285) 98%, transparent) 100%);
       backdrop-filter: blur(20px);
       border: 1px solid var(--glass-border);
       border-right: none;
       border-radius: var(--radius-lg) 0 0 var(--radius-lg);
       box-shadow:
         -10px 0 40px color-mix(in oklch, oklch(0 0 0) 40%, transparent),
         inset 1px 0 0 color-mix(in oklch, oklch(1 0 0) 5%, transparent);
       transition: right 0.4s var(--ease-out-expo);
       z-index: 100;
       display: flex;

       &.open {
         right: 0;
       }
     }

     .audit-toggle {
       position: absolute;
       left: 0;
       top: 50%;
       transform: translate(-100%, -50%);
       width: 48px;
       height: 64px;
       background: var(--bg-secondary);
       border: 1px solid var(--border-light);
       border-right: none;
       border-radius: var(--radius) 0 0 var(--radius);
       color: var(--accent);
       cursor: pointer;
       display: flex;
       align-items: center;
       justify-content: center;
       transition: all 0.2s;

       &:hover {
         background: var(--bg-tertiary);
         color: var(--accent-hover);
       }

       & svg {
         width: 20px;
         height: 20px;
         transition: transform 0.3s;
       }

       .audit-panel.open & svg {
         transform: rotate(180deg);
       }
     }

     .audit-content {
       flex: 1;
       display: flex;
       flex-direction: column;
       overflow: hidden;
     }

     .audit-header {
       padding: var(--space-md) var(--space-lg);
       border-bottom: 1px solid var(--border);

       & h3 {
         font-family: var(--font-ui);
         margin: 0;
         font-size: 1rem;
         font-weight: 600;
         color: var(--accent);
       }
     }

     .audit-hint {
       font-size: 0.75rem;
       color: var(--text-hint);
     }

     .audit-code {
       flex: 1;
       margin: 0;
       padding: var(--space-md);
       overflow: auto;
       font-family: var(--font-mono);
       font-size: 0.7rem;
       line-height: 1.5;
       color: var(--text-secondary);
       background: var(--bg-primary);
       white-space: pre;
     }

     .audit-stats {
       display: flex;
       justify-content: space-between;
       padding: var(--space-sm) var(--space-md);
       font-size: 0.7rem;
       color: var(--text-hint);
       border-top: 1px solid var(--border);
       background: var(--bg-tertiary);
     }

     /* Error Banner */
     .error-banner {
       position: fixed;
       top: 0;
       left: 50%;
       transform: translateX(-50%);
       z-index: 9999;
       display: flex;
       align-items: center;
       gap: var(--space-md);
       padding: var(--space-md) var(--space-lg);
       background: linear-gradient(135deg, color-mix(in oklch, var(--risky) 15%, transparent) 0%, color-mix(in oklch, var(--risky) 8%, transparent) 100%);
       border: 1px solid color-mix(in oklch, var(--risky) 30%, transparent);
       border-top: none;
       border-radius: 0 0 var(--radius-lg) var(--radius-lg);
       backdrop-filter: blur(12px);
       box-shadow: 0 4px 24px color-mix(in oklch, var(--risky) 15%, transparent);
       animation: slideDown 0.3s var(--ease-out-expo);

       &[hidden] {
         display: none;
       }
     }

     .error-icon {
       width: 20px;
       height: 20px;
       color: var(--risky);
       flex-shrink: 0;
     }

     #error-message {
       font-size: 0.9rem;
       color: var(--text-primary);
     }

     .error-retry {
       padding: var(--space-xs) var(--space-md);
       background: var(--risky);
       color: var(--bg-primary);
       border: none;
       border-radius: var(--radius-sm);
       font-size: 0.8rem;
       font-weight: 600;
       cursor: pointer;
       transition: all 0.2s;

       &:hover {
         background: var(--risky-dim);
         transform: scale(1.05);
       }
     }

     .error-dismiss {
       width: 24px;
       height: 24px;
       display: flex;
       align-items: center;
       justify-content: center;
       background: transparent;
       border: none;
       color: var(--text-secondary);
       font-size: 1.2rem;
       cursor: pointer;
       transition: color 0.2s;

       &:hover {
         color: var(--risky);
       }
     }
   }

   /* =============================================================================
      OVERRIDES LAYER - Media queries and accessibility
      ============================================================================= */
   @layer overrides {
     /* Responsive - Hero Cube */
     @media (max-width: 1024px) {
       .hero-cube-container,
       .hero-cube-reflect {
         transform: scale(0.85);
       }
       .hero-cube-reflect {
         transform: translateX(-50%) scale(0.85);
       }
     }

     @media (max-width: 768px) {
       .hero-cube-container,
       .hero-cube-reflect {
         transform: scale(0.65);
       }
       .hero-cube-reflect {
         transform: translateX(-50%) scale(0.65);
       }
       .hero-overlay {
         padding: var(--space-xs) var(--space-sm);
       }
       .hero-overlay h1 {
         font-size: 2rem;
       }
       .hero-overlay .tagline {
         font-size: 1.1rem;
         letter-spacing: 0.15em;
       }

       .upgrades-grid {
         grid-template-columns: 1fr;
       }

       .core-grid,
       .peripheral-columns,
       .monitor-columns {
         grid-template-columns: 1fr;
       }

       .driver-grid {
         grid-template-columns: 1fr;
       }

       .driver-card--monitor {
         grid-column: span 1;
       }

       .step {
         margin-bottom: var(--space-xl);
         padding: var(--space-lg);
       }

       .step-desc {
         padding-left: 0;
       }

       .summary {
         grid-template-columns: 1fr;
       }

       .summary-item {
         border-right: none !important;
         border-bottom: 1px solid var(--border);

         &:last-child {
           border-bottom: none;
         }
       }

       .software-grid {
         grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
       }
     }

     @media (max-width: 600px) {
       .software-grid {
         grid-template-columns: repeat(3, 1fr);
         gap: var(--space-sm);
       }

       .software-card .logo {
         width: 36px;
         height: 36px;
       }

       .software-card .name {
         font-size: 0.7rem;
       }

       .label-hint {
         display: none;
       }
     }

     @media (max-width: 480px) {
       .hero-cube-container,
       .hero-cube-reflect {
         transform: scale(0.5);
       }
       .hero-cube-reflect {
         transform: translateX(-50%) scale(0.5);
       }
       .hero-overlay {
         padding: 2px var(--space-xs);
       }
       .hero-overlay h1 {
         font-size: 2rem;
       }
       .hero-overlay .tagline {
         font-size: 0.9rem;
         letter-spacing: 0.1em;
       }
     }

     /* Hide audit panel on smaller screens */
     @media (max-width: 1200px) {
       .audit-panel {
         display: none;
       }
     }

     /* Reduced motion - accessibility */
     @media (prefers-reduced-motion: reduce) {
       *,
       *::before,
       *::after {
         animation-duration: 0.01ms !important;
         animation-iteration-count: 1 !important;
         transition-duration: 0.01ms !important;
         scroll-behavior: auto !important;
       }

       body::before {
         animation: none !important;
         filter: none !important;
       }

       body::after {
         animation: none !important;
       }

       .cursor-glow {
         display: none !important;
       }

       .software-card:hover {
         transform: none !important;
       }

       .software-card.selected::before {
         animation: none !important;
       }

       .step:hover::before {
         animation: none !important;
       }

       .preset-btn::before {
         display: none !important;
       }

       .step.animate-in {
         opacity: 1 !important;
         transform: none !important;
       }

       .step.animate-in::before {
         backdrop-filter: blur(var(--glass-depth-2)) saturate(1.5) !important;
         -webkit-backdrop-filter: blur(var(--glass-depth-2)) saturate(1.5) !important;
       }

       .hero-cube-wrapper .face p,
       .hero-cube-reflect .face p {
         animation: none !important;
         margin-left: 0 !important;
       }

       .hero-cube-content,
       .hero-silhouette,
       .hero-hue-overlay {
         animation: none !important;
       }

       fieldset label input[type="checkbox"]:checked::before,
       fieldset label input[type="radio"]:checked::before {
         animation: none;
       }
     }
   }
