@layer components {
  

  @scope (.preview-modal) {
    :scope {
      
      --pm-clip: var(--clip-cyber-md);
      --pm-clip-sm: var(--clip-cyber-xs);
      --pm-clip-xs: var(--clip-cyber-2xs);

      
      position: fixed;
      inset-block-start: 50%;
      inset-inline-start: 50%;
      transform: translate(-50%, -50%);

      
      inline-size: min(90vw, 900px);
      max-block-size: 85vh;
      padding: 0;
      margin: 0;

      
      border: 1px solid var(--border);
      clip-path: var(--pm-clip);
      background: var(--bg-card);
      color: var(--text-primary);
      overflow: hidden;

      
      flex-direction: column;

      
      &[open] {
        display: flex;
      }

      &::backdrop {
        background: var(--black-75);
        backdrop-filter: blur(4px);
      }
    }

    
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-block: var(--space-sm);
      padding-inline: var(--space-md);
      border-block-end: 1px solid color-mix(in oklch, var(--cyber-yellow) 25%, var(--border));
      background: linear-gradient(
        180deg,
        color-mix(in oklch, var(--cyber-yellow) 8%, var(--bg-header)) 0%,
        var(--bg-header) 100%
      );

      & h3 {
        margin: 0;
        font-family: var(--font-display);
        font-size: var(--text-sm);
        font-weight: 700;
        letter-spacing: var(--tracking-wider);
        color: var(--cyber-yellow);
        text-shadow: var(--glow-sm) var(--cyber-yellow-glow);
      }
    }

    .header-icon {
      color: var(--cyber-yellow);
      margin-inline-end: var(--space-xs);
    }

    
    .close {
      display: grid;
      place-items: center;
      inline-size: 28px;
      block-size: 28px;
      padding: 0;
      border: 1px solid var(--border);
      background: var(--white-3);
      color: var(--text-secondary);
      cursor: pointer;
      clip-path: var(--pm-clip-sm);
      transition: var(--transition-quick);
      transition-property: color, background, border-color, box-shadow;

      & svg {
        inline-size: var(--icon-xs);
        block-size: var(--icon-xs);
      }

      &:hover {
        background: color-mix(in oklch, var(--risky) 15%, transparent);
        border-color: var(--risky);
        color: var(--risky);
        box-shadow: var(--glow-sm) color-mix(in oklch, var(--risky) 30%, transparent);
      }
    }

    
    .body {
      flex: 1;
      padding: var(--space-sm);
      overflow: auto;
    }

    
    .footer {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
      padding-block: var(--space-sm);
      padding-inline: var(--space-md);
      font-size: var(--text-sm);
      color: var(--text-secondary);
      background: var(--black-80);
      border-block-start: 1px solid var(--border);

      & code,
      & .run-step {
        display: inline-flex;
        align-items: center;
        padding-block: 0.25rem;
        padding-inline: 0.6rem;
        background: color-mix(in oklch, var(--cyber-yellow) 12%, transparent);
        border: 1px solid color-mix(in oklch, var(--cyber-yellow) 40%, transparent);
        clip-path: var(--pm-clip-xs);
        font-family: var(--font-mono);
        font-size: var(--text-sm);
        font-weight: 600;
        color: var(--cyber-yellow);
      }
    }

    .label {
      color: var(--text-primary);
      font-weight: 600;
    }

    .arrow {
      color: var(--text-secondary);
      font-weight: 500;
    }
  }
}
